# –°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### Backend
1. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `object_id` –≤ –º–æ–¥–µ–ª—å Notification (schema.prisma)
2. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã DTO –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
3. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã —Ç–∏–ø—ã –≤ shared/src/types

### Frontend
1. ‚úÖ –°–æ–∑–¥–∞–Ω API —Å–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏ (notifications.api.ts)
2. ‚úÖ –°–æ–∑–¥–∞–Ω—ã —Ö—É–∫–∏ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –ø—É–ª–ª–∏–Ω–≥–æ–º –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥:
   - `useNotifications` - –ø–æ–ª—É—á–µ–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
   - `useUnreadNotificationsCount` - –ø–æ–¥—Å—á–µ—Ç –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö
   - `useMarkNotificationAsRead` - –æ—Ç–º–µ—Ç–∫–∞ –∫–∞–∫ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω–æ–µ
   - `useMarkAllNotificationsAsRead` - –æ—Ç–º–µ—Ç–∏—Ç—å –≤—Å–µ
3. ‚úÖ –°–æ–∑–¥–∞–Ω –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `NotificationDropdown` —Å:
   - –ö—Ä–∞—Å–∏–≤—ã–º –¥—Ä–æ–ø–¥–∞—É–Ω–æ–º
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –ø—É–ª–ª–∏–Ω–≥–æ–º
   - –§–∏–ª—å—Ç—Ä–æ–º "—Ç–æ–ª—å–∫–æ –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ"
   - –ù–∞–≤–∏–≥–∞—Ü–∏–µ–π –ø–æ –æ–±—ä–µ–∫—Ç–∞–º
   - –¶–≤–µ—Ç–æ–≤—ã–º –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
4. ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ Header

## üìã –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å

### 1. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```bash
cd shared
npx prisma migrate dev --name add_object_id_to_notifications
```

–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞:
- –°–æ–∑–¥–∞—Å—Ç –º–∏–≥—Ä–∞—Ü–∏—é –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—è `object_id`
- –ü—Ä–∏–º–µ–Ω–∏—Ç –º–∏–≥—Ä–∞—Ü–∏—é –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- –û–±–Ω–æ–≤–∏—Ç Prisma Client

### 2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–µ–∫—Ç

#### Backend
```bash
cd backend
pnpm install  # –µ—Å–ª–∏ –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
# Backend –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Ö–≤–∞—Ç–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è
```

#### Frontend
```bash
cd frontend
pnpm install  # –µ—Å–ª–∏ –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
# Frontend –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Ö–≤–∞—Ç–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è
```

## üéØ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –°–æ–∑–¥–∞–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (Backend)

```typescript
// –ü—Ä–∏–º–µ—Ä —Å–æ–∑–¥–∞–Ω–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ –Ω–æ–≤–æ–º –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏
await notificationsService.create({
  data: {
    type: NotificationType.BOOKING,
    action: NotificationAction.NEW,
    message: `New booking #${booking.id} created`,
    user_id: booking.user_id,
    object_id: booking.id, // ‚≠ê –°—Å—ã–ª–∫–∞ –Ω–∞ –æ–±—ä–µ–∫—Ç –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
  }
});

// –ü—Ä–∏–º–µ—Ä —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –æ—Ç–º–µ–Ω–µ
await notificationsService.create({
  data: {
    type: NotificationType.BOOKING,
    action: NotificationAction.CANCEL,
    message: `Booking #${booking.id} was cancelled`,
    user_id: booking.user_id,
    object_id: booking.id,
  }
});

// –ü—Ä–∏–º–µ—Ä —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏
await notificationsService.create({
  data: {
    type: NotificationType.MESSAGE,
    action: NotificationAction.NEW,
    message: `You have a new message from ${sender.first_name}`,
    user_id: receiver.id,
    object_id: null, // –î–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π object_id –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω
  }
});
```

### –¢–∏–ø—ã –∏ –¥–µ–π—Å—Ç–≤–∏—è

```typescript
// –¢–∏–ø—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
enum NotificationType {
  BOOKING       // –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
  RESERVATION   // –†–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏—è
  MESSAGE       // –°–æ–æ–±—â–µ–Ω–∏—è
  ERROR         // –û—à–∏–±–∫–∏
  WARNING       // –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
}

// –î–µ–π—Å—Ç–≤–∏—è
enum NotificationAction {
  NEW           // –ù–æ–≤–æ–µ
  CONFIRM       // –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ
  UPDATE        // –û–±–Ω–æ–≤–ª–µ–Ω–æ
  CANCEL        // –û—Ç–º–µ–Ω–µ–Ω–æ
  COMPLETE      // –ó–∞–≤–µ—Ä—à–µ–Ω–æ
}
```

## üîó –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –æ–±—ä–µ–∫—Ç–∞–º

–ü—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–∏—Ç –Ω–∞:
- **BOOKING** ‚Üí `/admin/bookings/{object_id}`
- **RESERVATION** ‚Üí `/admin/reservations/{object_id}`
- **MESSAGE** ‚Üí `/admin/messages`

–î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö —Ç–∏–ø–æ–≤ —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é `getNotificationPath` –≤ `NotificationDropdown.tsx`

## üé® –í–Ω–µ—à–Ω–∏–π –≤–∏–¥

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –≤ Header –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç:
- üîî –ò–∫–æ–Ω–∫–∞ –∫–æ–ª–æ–∫–æ–ª—å—á–∏–∫–∞
- üî¥ Badge —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö (–µ—Å–ª–∏ –µ—Å—Ç—å)
- üìã –î—Ä–æ–ø–¥–∞—É–Ω —Å–æ —Å–ø–∏—Å–∫–æ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- ‚è∞ –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è (Just now, 5m ago, 2h ago)
- üé® –¶–≤–µ—Ç–æ–≤–æ–µ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ —Ç–∏–ø—É
- ‚úÖ –ö–Ω–æ–ø–∫–∞ "–æ—Ç–º–µ—Ç–∏—Ç—å –≤—Å–µ –∫–∞–∫ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω–æ–µ"
- üîç –§–∏–ª—å—Ç—Ä "—Ç–æ–ª—å–∫–æ –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ"

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏

### –ò–∑–º–µ–Ω–∏—Ç—å –∏–Ω—Ç–µ—Ä–≤–∞–ª –ø—É–ª–ª–∏–Ω–≥–∞
–í —Ñ–∞–π–ª–µ `/frontend/src/hooks/common/useNotifications.ts`:
```typescript
const POLLING_INTERVAL = 30000; // 30 —Å–µ–∫—É–Ω–¥ (–∏–∑–º–µ–Ω–∏—Ç–µ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
```

### –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Ç–∏–ø –æ–±—ä–µ–∫—Ç–∞ –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
–í —Ñ–∞–π–ª–µ `/frontend/src/components/admin/common/Layout/components/Header/components/NotificationDropdown/NotificationDropdown.tsx`:
```typescript
const getNotificationPath = (notification: Notification): string | null => {
  switch (notification.type) {
    case NotificationType.BOOKING:
      return `/admin/bookings/${notification.object_id}`;
    case NotificationType.RESERVATION:
      return `/admin/reservations/${notification.object_id}`;
    // –î–æ–±–∞–≤—å—Ç–µ —Å–≤–æ–π —Ç–∏–ø –∑–¥–µ—Å—å
    case NotificationType.YOUR_NEW_TYPE:
      return `/admin/your-path/${notification.object_id}`;
    default:
      return null;
  }
};
```

## üìÅ –§–∞–π–ª–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

```
backend/src/app/users-section/notifications/
‚îú‚îÄ‚îÄ controller.ts          # API endpoints
‚îú‚îÄ‚îÄ service.ts            # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îú‚îÄ‚îÄ module.ts             # NestJS –º–æ–¥—É–ª—å
‚îî‚îÄ‚îÄ dto/
    ‚îú‚îÄ‚îÄ create.dto.ts     # ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω (–¥–æ–±–∞–≤–ª–µ–Ω object_id)
    ‚îú‚îÄ‚îÄ update.dto.ts     # DTO –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
    ‚îî‚îÄ‚îÄ index.ts

frontend/src/
‚îú‚îÄ‚îÄ lib/api/services/
‚îÇ   ‚îî‚îÄ‚îÄ notifications.api.ts       # ‚úÖ –ù–æ–≤—ã–π API —Å–µ—Ä–≤–∏—Å
‚îú‚îÄ‚îÄ hooks/common/
‚îÇ   ‚îî‚îÄ‚îÄ useNotifications.ts        # ‚úÖ –ù–æ–≤—ã–µ —Ö—É–∫–∏ —Å –ø—É–ª–ª–∏–Ω–≥–æ–º
‚îî‚îÄ‚îÄ components/admin/common/Layout/components/Header/components/
    ‚îú‚îÄ‚îÄ Notification/
    ‚îÇ   ‚îî‚îÄ‚îÄ Notification.tsx       # ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω
    ‚îî‚îÄ‚îÄ NotificationDropdown/      # ‚úÖ –ù–æ–≤—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
        ‚îú‚îÄ‚îÄ NotificationDropdown.tsx
        ‚îú‚îÄ‚îÄ NotificationDropdown.module.scss
        ‚îú‚îÄ‚îÄ index.ts
        ‚îî‚îÄ‚îÄ README.md

shared/
‚îú‚îÄ‚îÄ prisma/
‚îÇ   ‚îî‚îÄ‚îÄ schema.prisma             # ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ –º–æ–¥–µ–ª—å Notification
‚îî‚îÄ‚îÄ src/types/users-section/
    ‚îî‚îÄ‚îÄ dto.types.ts              # ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã —Ç–∏–ø—ã
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. **–°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ** —á–µ—Ä–µ–∑ Prisma Studio –∏–ª–∏ API
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ** –≤ Header (–¥–æ–ª–∂–µ–Ω –ø–æ—è–≤–∏—Ç—å—Å—è badge)
3. **–û—Ç–∫—Ä–æ–π—Ç–µ –¥—Ä–æ–ø–¥–∞—É–Ω** - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤ —Å–ø–∏—Å–∫–µ
4. **–ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ** - –¥–æ–ª–∂–Ω–∞ —Å—Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞–≤–∏–≥–∞—Ü–∏—è
5. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—É–ª–ª–∏–Ω–≥** - —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ, –æ–Ω–æ –¥–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è —á–µ—Ä–µ–∑ 30 —Å–µ–∫—É–Ω–¥

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤:
- `/frontend/src/components/admin/common/Layout/components/Header/components/NotificationDropdown/README.md`

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

1. **–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é** –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º
2. **object_id –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤–∞–ª–∏–¥–Ω—ã–º UUID** —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –æ–±—ä–µ–∫—Ç–∞
3. **–°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**
4. **Admin –≤–∏–¥–∏—Ç –≤—Å–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ - —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏**

## üéâ –ì–æ—Ç–æ–≤–æ!

–°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é. –ü—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –±—É–¥–µ—Ç –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É, –∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–º–µ—Ç–∏—Ç—Å—è –∫–∞–∫ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω–æ–µ.

