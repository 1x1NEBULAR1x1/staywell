@use '@/components/styles/_variables.scss' as *;

.notification_wrapper {
  position: relative;

  .notification_button {
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    border: none;
    background: transparent;
    cursor: pointer;
    border-radius: $border-radius-md;
    transition: background $transition-fast;

    &:hover {
      background: $background-light;
    }

    .bell_icon {
      width: 20px;
      height: 20px;
      color: $foreground-main;
    }

    .badge {
      position: absolute;
      top: 4px;
      right: 4px;
      min-width: 18px;
      height: 18px;
      padding: 0 4px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: $red;
      color: $foreground-white;
      font-size: 10px;
      font-weight: $font-weight-bold;
      border-radius: 9999px;
      line-height: 1;
    }
  }

  .dropdown {
    position: absolute;
    top: calc(100% + 8px);
    right: 0;
    width: 420px;
    max-height: 600px;
    background: $background-main;
    border: $border-normal;
    border-radius: $border-radius-lg;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
    display: flex;
    flex-direction: column;
    z-index: 1000;
    animation: slideDown 0.2s ease-out;

    @keyframes slideDown {
      from {
        opacity: 0;
        transform: translateY(-10px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .dropdown_header {
      padding: $spacing-md;
      border-bottom: $border-normal;

      .header_title {
        display: flex;
        align-items: center;
        gap: $spacing-sm;
        margin-bottom: $spacing-sm;

        h3 {
          font-size: $font-size-lg;
          font-weight: $font-weight-semibold;
          color: $foreground-main;
          margin: 0;
        }

        .unread_badge {
          padding: 2px 8px;
          background: $primary-light;
          color: $primary-main;
          font-size: $font-size-sm;
          font-weight: $font-weight-semibold;
          border-radius: 9999px;
        }
      }

      .header_actions {
        display: flex;
        gap: $spacing-sm;
        align-items: center;

        .filter_button,
        .mark_all_button {
          padding: $spacing-xs $spacing-sm;
          border: $border-normal;
          background: $background-light;
          color: $foreground-secondary;
          font-size: $font-size-sm;
          font-weight: $font-weight-semibold;
          border-radius: $border-radius-md;
          cursor: pointer;
          transition: all $transition-fast;
          display: flex;
          align-items: center;
          gap: $spacing-xs;

          &:hover {
            background: $background-main;
            border-color: $primary-main;
          }

          &.active {
            background: $primary-main;
            color: $foreground-white;
            border-color: $primary-main;
          }

          &:disabled {
            opacity: 0.5;
            cursor: not-allowed;
          }

          .check_icon {
            width: 14px;
            height: 14px;
          }
        }
      }
    }

    .notifications_list {
      flex: 1;
      overflow-y: auto;
      max-height: 440px;

      .loading {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: $spacing-2xl;
        gap: $spacing-md;

        .loader {
          width: 40px;
          height: 40px;
          border: 3px solid $background-light;
          border-top-color: $primary-main;
          border-radius: 50%;
          animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
          to {
            transform: rotate(360deg);
          }
        }

        p {
          color: $foreground-secondary;
          margin: 0;
        }
      }

      .empty_state {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: $spacing-2xl;
        text-align: center;

        .empty_icon {
          width: 48px;
          height: 48px;
          color: $foreground-secondary;
          opacity: 0.5;
          margin-bottom: $spacing-md;
        }

        .empty_title {
          font-size: $font-size-lg;
          font-weight: $font-weight-semibold;
          color: $foreground-main;
          margin: 0 0 $spacing-xs 0;
        }

        .empty_text {
          font-size: $font-size-md;
          color: $foreground-secondary;
          margin: 0;
        }
      }

      .notification_item {
        display: flex;
        gap: $spacing-md;
        padding: $spacing-md;
        border-bottom: $border-normal;
        cursor: pointer;
        transition: background $transition-fast;
        position: relative;

        &:last-child {
          border-bottom: none;
        }

        &:hover {
          background: $background-light;
        }

        &.unread {
          background: rgba($primary-light, 0.3);

          &:hover {
            background: rgba($primary-light, 0.5);
          }
        }

        .notification_icon {
          width: 40px;
          height: 40px;
          flex-shrink: 0;
          display: flex;
          align-items: center;
          justify-content: center;
          border-radius: $border-radius-md;
          background: $background-light;

          .icon {
            width: 20px;
            height: 20px;
            color: $foreground-main;
          }
        }

        &.booking .notification_icon {
          background: rgba($primary-light, 0.1);

          .icon {
            color: $primary-light;
          }
        }

        &.reservation .notification_icon {
          background: rgba($green, 0.1);

          .icon {
            color: $green;
          }
        }

        &.message .notification_icon {
          background: rgba($primary-main, 0.1);

          .icon {
            color: $primary-main;
          }
        }

        &.error .notification_icon {
          background: rgba($red, 0.1);

          .icon {
            color: $red;
          }
        }

        &.warning .notification_icon {
          background: rgba($yellow, 0.1);

          .icon {
            color: $yellow;
          }
        }

        .notification_content {
          flex: 1;
          min-width: 0;

          .notification_header {
            display: flex;
            align-items: center;
            gap: $spacing-xs;
            margin-bottom: $spacing-xs;

            .notification_type {
              font-size: $font-size-sm;
              font-weight: $font-weight-semibold;
              color: $foreground-main;
              text-transform: capitalize;
            }

            .action_icon {
              width: 14px;
              height: 14px;
              color: $foreground-secondary;
            }

            .notification_time {
              margin-left: auto;
              font-size: $font-size-xs;
              color: $foreground-secondary;
              white-space: nowrap;
            }
          }

          .notification_message {
            font-size: $font-size-md;
            color: $foreground-secondary;
            margin: 0;
            line-height: 1.5;
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            line-clamp: 2;
            -webkit-box-orient: vertical;
          }
        }

        .unread_indicator {
          position: absolute;
          top: 50%;
          right: $spacing-md;
          transform: translateY(-50%);
          width: 8px;
          height: 8px;
          background: $primary-main;
          border-radius: 50%;
        }
      }
    }

    .dropdown_footer {
      padding: $spacing-sm;
      border-top: $border-normal;

      .view_all_button {
        width: 100%;
        padding: $spacing-sm;
        border: none;
        background: transparent;
        color: $primary-main;
        font-size: $font-size-md;
        font-weight: $font-weight-semibold;
        cursor: pointer;
        border-radius: $border-radius-md;
        transition: background $transition-fast;

        &:hover {
          background: $primary-disabled;
        }
      }
    }
  }
}